#!/bin/sh

wifi="$(nmcli -g TYPE,CONNECTION device status | grep "wifi:" | cut -d: -f2)"
if [ -z "$wifi" ]; then
  wifi="X"
fi

partitions="$(df -h | grep -e "^/dev/" | awk '{ printf("%s  %s / %s (%s)\n", $1, $3, $2, $5) }')"

sound_vol="$(awk -F"[][]" '/Left:/ { print $2 }' <(amixer sget Master))"
date="$(date '+%Y-%m-%d  %H:%M:%S (%a)')"


partition_status=""
IFS=$'\n'
for partition in $partitions; do
  partition_status+="|  $partition  "
done

xsetroot -name "$partition_status|  wifi: $wifi  |  vol: $sound_vol  |  $date  "

